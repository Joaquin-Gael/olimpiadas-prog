import{b as Y,c as H,d as P,f as W,g as $,j as J,l as K,m as Q,q as X,s as Z}from"./chunk-OASB7JVU.js";import{b as D}from"./chunk-33GWQ3Y4.js";import{a as G,c as A,d as B,g as j}from"./chunk-3V5FGDDO.js";import{a as q}from"./chunk-TBXP7WCQ.js";import{n as U}from"./chunk-NQE72YS2.js";import{Ab as o,Bb as p,Dc as V,Fb as E,Hb as w,Ib as M,Kc as N,Ub as k,Wb as l,Xa as a,Xb as z,Yb as L,ac as I,ea as m,fc as T,gc as R,hb as F,ja as y,ka as O,la as b,ma as S,ta as v,vb as x,wb as c,xb as d,yb as h,zb as t}from"./chunk-F7PPLVIA.js";var te=(n,i)=>({"feedback-message--success":n,"feedback-message--error":i});function ne(n,i){n&1&&(b(),t(0,"svg",28),p(1,"polyline",31),o())}function oe(n,i){n&1&&(b(),t(0,"svg",28),p(1,"circle",32)(2,"line",33)(3,"line",34),o())}function ie(n,i){if(n&1){let r=E();t(0,"div",7)(1,"span",27),c(2,ne,2,0,":svg:svg",28),c(3,oe,4,0,":svg:svg",28),o(),t(4,"span",29),l(5),o(),t(6,"button",30),w("click",function(){y(r);let s=M();return O(s.closeFeedback())}),l(7,"\xD7"),o()()}if(n&2){let r=M();h("ngClass",I(4,te,r.feedback().type==="success",r.feedback().type==="error")),a(2),d(r.feedback().type==="success"?2:-1),a(),d(r.feedback().type==="error"?3:-1),a(2),z(r.feedback().message)}}function re(n,i){n&1&&(t(0,"span"),l(1,"El email es obligatorio."),o())}function ae(n,i){n&1&&(t(0,"span"),l(1,"Ingres\xE1 un email v\xE1lido."),o())}function le(n,i){if(n&1&&(t(0,"div",12),c(1,re,2,0,"span"),c(2,ae,2,0,"span"),o()),n&2){let r,e,s=M();a(),d(!((r=s.loginForm.get("email"))==null||r.errors==null)&&r.errors.required?1:-1),a(),d(!((e=s.loginForm.get("email"))==null||e.errors==null)&&e.errors.email?2:-1)}}function se(n,i){n&1&&(b(),t(0,"svg",17),p(1,"path",35)(2,"circle",36),o())}function ce(n,i){n&1&&(b(),t(0,"svg",17),p(1,"path",37)(2,"line",38),o())}function de(n,i){n&1&&(t(0,"div",12)(1,"span"),l(2,"La contrase\xF1a es obligatoria."),o()())}function pe(n,i){n&1&&p(0,"span",24)}var ee=class n{fb=m(X);authService=m(D);router=m(A);route=m(G);storageService=m(q);logger=m(U);showPassword=v(!1);isSubmitting=v(!1);feedback=v({message:"",type:null});loginForm=this.fb.group({email:["",[P.required,P.email]],password:["",[P.required]],remember:[!1]});returnUrl=T(()=>{let i=this.route.snapshot.queryParams.returnUrl;return i?.startsWith("/")?i:"/user_panel"});constructor(){R(()=>{let i=this.storageService.getItem("rememberEmail");i&&this.loginForm.patchValue({email:i,remember:!0})})}togglePassword(){this.showPassword.update(i=>!i)}closeFeedback(){this.feedback.set({message:"",type:null})}onLogin(){if(this.loginForm.invalid||this.isSubmitting()){this.loginForm.markAllAsTouched(),this.feedback.set({message:"Por favor complet\xE1 correctamente el email y la contrase\xF1a.",type:"error"});return}this.isSubmitting.set(!0),this.feedback.set({message:"",type:null});let{email:i,password:r,remember:e}=this.loginForm.value,s=i.trim(),u={email:s,password:r};e?this.storageService.setItem("rememberEmail",s):this.storageService.removeItem("rememberEmail"),this.authService.login(u).subscribe({next:g=>{this.isSubmitting.set(!1),this.feedback.set({message:"\xA1Inicio de sesi\xF3n exitoso! Redirigiendo...",type:"success"}),setTimeout(()=>this.router.navigateByUrl(this.returnUrl()),2e3)},error:g=>{this.isSubmitting.set(!1);let f=g?.message||"Credenciales inv\xE1lidas o error inesperado.";this.feedback.set({message:`Error al iniciar sesi\xF3n: ${f}`,type:"error"}),this.logger.error("Error en el inicio de sesi\xF3n",g)}})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=F({type:n,selectors:[["app-login"]],decls:41,vars:18,consts:[["role","region","aria-labelledby","login-title",1,"travel-login-container"],[1,"auth-card"],[1,"auth-header"],[1,"logo"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"],["id","login-title"],["role","alert",1,"feedback-message",3,"ngClass"],["role","form",1,"auth-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","ejemplo@correo.com","aria-required","true",1,"form-input"],[1,"error-message"],["for","password",1,"form-label"],[1,"password-input"],["id","password","formControlName","password","placeholder","Ingres\xE1 tu contrase\xF1a","aria-required","true",1,"form-input",3,"type"],["type","button",1,"toggle-password",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"form-options"],[1,"checkbox-wrapper"],["type","checkbox","formControlName","remember","aria-label","Recordar mi email"],[1,"checkbox-text"],["href","/forgot-password","aria-label","Recuperar contrase\xF1a",1,"forgot-password"],["type","submit","aria-label","Iniciar sesi\xF3n",1,"btn-primary",3,"disabled"],[1,"loading-spinner"],[1,"auth-footer"],["routerLink","/register","aria-label","Ir al formulario de registro"],[1,"feedback-message__icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"feedback-message__text"],["type","button","aria-label","Cerrar mensaje",3,"click"],["points","20,6 9,17 4,12"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],["d","M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"],["x1","1","y1","1","x2","23","y2","23"]],template:function(r,e){if(r&1&&(t(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),b(),t(4,"svg",4),p(5,"path",5),o()(),S(),t(6,"h1",6),l(7,"Iniciar Sesi\xF3n"),o(),t(8,"p"),l(9,"Ingres\xE1 tus credenciales para planificar tu pr\xF3xima aventura"),o()(),c(10,ie,8,7,"div",7),t(11,"form",8),w("ngSubmit",function(){return e.onLogin()}),t(12,"div",9)(13,"label",10),l(14,"Correo electr\xF3nico"),o(),p(15,"input",11),c(16,le,3,2,"div",12),o(),t(17,"div",9)(18,"label",13),l(19,"Contrase\xF1a"),o(),t(20,"div",14),p(21,"input",15),t(22,"button",16),w("click",function(){return e.togglePassword()}),c(23,se,3,0,":svg:svg",17),c(24,ce,3,0,":svg:svg",17),o()(),c(25,de,3,0,"div",12),o(),t(26,"div",18)(27,"label",19),p(28,"input",20),t(29,"span",21),l(30,"Recordarme"),o()(),t(31,"a",22),l(32,"\xBFOlvidaste tu contrase\xF1a?"),o()(),t(33,"button",23),c(34,pe,1,0,"span",24),l(35),o(),t(36,"div",25)(37,"p"),l(38,"\xBFNo ten\xE9s cuenta? "),t(39,"a",26),l(40,"Registrate"),o()()()()()()),r&2){let s,u,g,f,C,_;a(10),d(e.feedback().message?10:-1),a(),h("formGroup",e.loginForm),a(4),k("form-input--error",((s=e.loginForm.get("email"))==null?null:s.touched)&&((s=e.loginForm.get("email"))==null?null:s.invalid)),x("aria-invalid",((u=e.loginForm.get("email"))==null?null:u.touched)&&((u=e.loginForm.get("email"))==null?null:u.invalid)),a(),d((g=e.loginForm.get("email"))!=null&&g.touched&&((g=e.loginForm.get("email"))!=null&&g.invalid)?16:-1),a(5),k("form-input--error",((f=e.loginForm.get("password"))==null?null:f.touched)&&((f=e.loginForm.get("password"))==null?null:f.invalid)),h("type",e.showPassword()?"text":"password"),x("aria-invalid",((C=e.loginForm.get("password"))==null?null:C.touched)&&((C=e.loginForm.get("password"))==null?null:C.invalid)),a(),x("aria-label",e.showPassword()?"Ocultar contrase\xF1a":"Mostrar contrase\xF1a"),a(),d(e.showPassword()?-1:23),a(),d(e.showPassword()?24:-1),a(),d((_=e.loginForm.get("password"))!=null&&_.touched&&(!((_=e.loginForm.get("password"))==null||_.errors==null)&&_.errors.required)?25:-1),a(8),h("disabled",e.loginForm.invalid||e.isSubmitting()),x("aria-busy",e.isSubmitting()),a(),d(e.isSubmitting()?34:-1),a(),L(" ",e.isSubmitting()?"Iniciando...":"Iniciar Sesi\xF3n"," ")}},dependencies:[N,V,Z,J,H,Y,W,$,K,Q,j,B],styles:['.travel-login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;position:relative}.travel-login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-image:radial-gradient(circle at 25% 25%,rgba(255,255,255,.1) 0%,transparent 50%),radial-gradient(circle at 75% 75%,rgba(255,255,255,.05) 0%,transparent 50%);pointer-events:none}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:420px;background-color:#fff;border-radius:12px;box-shadow:0 20px 25px #0000001a,0 10px 10px #0000000a;border:1px solid rgba(255,255,255,.2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);position:relative;z-index:1}.auth-header[_ngcontent-%COMP%]{padding:48px 32px 24px;text-align:center;border-bottom:1px solid #f1f5f9}.auth-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-bottom:24px}.auth-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#0ea5e9;width:40px;height:40px;filter:drop-shadow(0 2px 4px rgba(14,165,233,.2))}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;font-weight:700;color:#1e293b;line-height:1.2;background:linear-gradient(135deg,#0ea5e9,#06b6d4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#475569;line-height:1.5}.feedback-message[_ngcontent-%COMP%]{margin:24px 32px 0;padding:16px;border-radius:8px;display:flex;align-items:center;gap:8px;font-size:14px;font-weight:500;position:relative}.feedback-message--success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b9811a,#10b9810d);color:#10b981;border:1px solid rgba(16,185,129,.2)}.feedback-message--error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef44441a,#ef44440d);color:#ef4444;border:1px solid rgba(239,68,68,.2)}.feedback-message__icon[_ngcontent-%COMP%]{flex-shrink:0}.feedback-message__text[_ngcontent-%COMP%]{flex:1}.feedback-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:inherit;font-size:18px;font-weight:700;cursor:pointer;padding:4px;border-radius:4px;transition:all .15s cubic-bezier(.4,0,.2,1)}.feedback-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0000001a}.auth-form[_ngcontent-%COMP%]{padding:32px}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;font-weight:600;color:#334155;letter-spacing:.025em}.form-input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;font-size:16px;border:2px solid #e2e8f0;border-radius:8px;background-color:#fff;color:#1e293b;transition:all .2s cubic-bezier(.4,0,.2,1);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.form-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0ea5e9;box-shadow:0 0 0 3px #0ea5e91a;transform:translateY(-1px)}.form-input[_ngcontent-%COMP%]:hover:not(:focus){border-color:#cbd5e1}.form-input--error[_ngcontent-%COMP%]{border-color:#ef4444}.form-input--error[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #ef44441a}.password-input[_ngcontent-%COMP%]{position:relative}.password-input[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{padding-right:50px}.password-input[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;right:16px;top:50%;transform:translateY(-50%);background:none;border:none;color:#94a3b8;cursor:pointer;padding:8px;border-radius:6px;transition:all .2s cubic-bezier(.4,0,.2,1)}.password-input[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:hover{color:#475569;background-color:#f1f5f9}.password-input[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:focus{outline:none;color:#0ea5e9;background-color:#0ea5e91a}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px;gap:16px}@media (max-width: 480px){.form-options[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}}.checkbox-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px;color:#475569}.checkbox-wrapper[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;accent-color:#0ea5e9}.forgot-password[_ngcontent-%COMP%]{color:#0ea5e9;text-decoration:none;font-size:14px;font-weight:500;transition:all .2s cubic-bezier(.4,0,.2,1)}.forgot-password[_ngcontent-%COMP%]:hover{color:#0284c7;text-decoration:underline}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:16px 24px;background:linear-gradient(135deg,#0ea5e9,#06b6d4);color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;justify-content:center;gap:8px;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;letter-spacing:.025em}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#0284c7,#15d7f8);transform:translateY(-2px);box-shadow:0 10px 15px #0000001a,0 4px 6px #0000000d}.btn-primary[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #0ea5e933}.btn-primary[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#94a3b8,#64748b);cursor:not-allowed;transform:none}.loading-spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:32px}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#475569}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0ea5e9;text-decoration:none;font-weight:600;transition:all .2s cubic-bezier(.4,0,.2,1)}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0284c7;text-decoration:underline}.error-message[_ngcontent-%COMP%]{margin-top:8px;font-size:14px;color:#ef4444;font-weight:500;display:flex;align-items:center;gap:4px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.travel-login-container[_ngcontent-%COMP%]{padding:16px}.auth-header[_ngcontent-%COMP%]{padding:24px 24px 16px}.auth-form[_ngcontent-%COMP%]{padding:24px}.feedback-message[_ngcontent-%COMP%]{margin:16px 24px 0}}@media (max-width: 480px){.auth-card[_ngcontent-%COMP%]{max-width:100%}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}.form-input[_ngcontent-%COMP%]{font-size:16px}}']})};export{ee as Login};
