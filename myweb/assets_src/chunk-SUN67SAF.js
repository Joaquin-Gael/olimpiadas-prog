import{B as ht,D as yt,E as vt,F as Ct,G as xt,N as Mt,O as Ot,P as Pt,Q as Tt,x as bt,y as _t}from"./chunk-VH452XVS.js";import{a as ut}from"./chunk-RO3E3J3P.js";import{a as T,b as gt}from"./chunk-VLZLEZCB.js";import{b as dt,d as ft,m as pt}from"./chunk-CK4HYLRU.js";import{$ as M,$a as Y,Ab as l,Bb as o,Cb as c,Db as m,E as b,Ea as U,Eb as J,Fb as W,Gb as tt,Hb as E,Hc as ct,Jb as N,Kb as d,Lc as lt,Mc as mt,Q as _,Qc as B,Ta as H,Ub as et,Vb as R,Wb as it,Xa as a,Xb as nt,Y as h,Yb as P,Zb as rt,_b as at,a as f,aa as L,ab as G,b as p,ca as V,da as x,dc as ot,ea as s,hb as O,hc as A,ib as q,ja as I,ka as S,lb as y,nb as Q,o as g,ob as Z,oc as st,p as X,s as u,ta as j,tc as D,vb as v,wb as $,xb as K,za as F}from"./chunk-HNZQVEQV.js";function Et(n,e){n&1&&m(0,"div",2)}var Nt=new V("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var kt=(()=>{class n{_elementRef=s(F);_ngZone=s(Z);_changeDetectorRef=s(st);_renderer=s(Y);_cleanupTransitionEnd;constructor(){let t=s(Nt,{optional:!0});t&&(t.color&&(this.color=this._defaultColor=t.color),this.mode=t.mode||this.mode)}_isNoopAnimation=bt();get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;_defaultColor="primary";get value(){return this._value}set value(t){this._value=wt(t||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(t){this._bufferValue=wt(t||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new Q;get mode(){return this._mode}set mode(t){this._mode=t,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=t=>{this.animationEnd.observers.length===0||!t.target||!t.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(i){return new(i||n)};static \u0275cmp=O({type:n,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(i,r){i&2&&(v("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),nt("mat-"+r.color),it("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",D],bufferValue:[2,"bufferValue","bufferValue",D],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(i,r){i&1&&(o(0,"div",0),m(1,"div",1),$(2,Et,1,0,"div",2),c(),o(3,"div",3),m(4,"span",4),c(),o(5,"div",5),m(6,"span",4),c()),i&2&&(a(),R("flex-basis",r._getBufferBarFlexBasis()),a(),K(r.mode==="buffer"?2:-1),a(),R("transform",r._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return n})();function wt(n,e=0,t=100){return Math.max(e,Math.min(t,n))}var It=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=q({type:n});static \u0275inj=L({imports:[_t]})}return n})();function At(n,e){if(n&1&&(o(0,"div",10),m(1,"mat-progress-bar",11),c()),n&2){let t=d();a(),l("value",t.progressValue())("color",t.progressColor())}}function Dt(n,e){if(n&1&&(o(0,"div",12)(1,"mat-icon"),P(2),c()()),n&2){let t=d();a(),v("aria-label",t.iconAriaLabel()),a(),rt(t.data.icon)}}function Bt(n,e){if(n&1&&(J(0),m(1,"span",13),W()),n&2){let t=d();a(),l("innerHTML",t.data.message,H)}}function zt(n,e){n&1&&tt(0)}function Xt(n,e){if(n&1&&y(0,zt,1,0,"ng-container",14),n&2){let t=d();l("ngTemplateOutlet",t.data.message)}}function Lt(n,e){if(n&1){let t=E();o(0,"button",15),N("click",function(){I(t);let r=d();return S(r.handleAction())}),P(1),c()}if(n&2){let t=d();v("aria-label",t.data.action.label),a(),at(" ",t.data.action.label," ")}}function Vt(n,e){if(n&1){let t=E();o(0,"button",16),N("click",function(){I(t);let r=d();return S(r.dismiss())}),o(1,"mat-icon"),P(2,"close"),c()()}}var w=class n{constructor(e){this.data=e}snackBarRef=s(Mt);platformId=s(U);progressValue=j(100);progressInterval;startTime=0;progressColor=A(()=>{switch(this.data.type){case"success":return"primary";case"error":return"warn";case"warning":return"accent";case"info":return"primary";default:return"primary"}});iconAriaLabel=A(()=>{switch(this.data.type){case"success":return"\xC9xito";case"error":return"Error";case"warning":return"Advertencia";case"info":return"Informaci\xF3n";default:return"Notificaci\xF3n"}});ngOnInit(){this.data.showProgress&&this.data.duration>0&&this.startProgressAnimation()}ngOnDestroy(){this.clearProgressInterval()}isString(e){return typeof e=="string"}handleAction(){this.data.action&&(this.data.action.action(),this.dismiss())}dismiss(){this.snackBarRef.dismiss()}startProgressAnimation(){B(this.platformId)&&(this.startTime=Date.now(),this.progressInterval=window.setInterval(()=>{let e=Date.now()-this.startTime,t=Math.max(0,100-e/this.data.duration*100);this.progressValue.set(t),t<=0&&this.clearProgressInterval()},50))}clearProgressInterval(){this.progressInterval&&B(this.platformId)&&(clearInterval(this.progressInterval),this.progressInterval=void 0)}static \u0275fac=function(t){return new(t||n)(G(Ot))};static \u0275cmp=O({type:n,selectors:[["app-notification-toast"]],decls:11,vars:7,consts:[["templateMessage",""],[1,"notification-toast"],["class","notification-progress",4,"ngIf"],[1,"notification-content"],["class","notification-icon",4,"ngIf"],[1,"notification-message"],[4,"ngIf","ngIfElse"],[1,"notification-actions"],["mat-button","","class","notification-action-btn",3,"click",4,"ngIf"],["mat-icon-button","","class","notification-dismiss-btn","aria-label","Cerrar notificaci\xF3n",3,"click",4,"ngIf"],[1,"notification-progress"],["mode","determinate",3,"value","color"],[1,"notification-icon"],[3,"innerHTML"],[4,"ngTemplateOutlet"],["mat-button","",1,"notification-action-btn",3,"click"],["mat-icon-button","","aria-label","Cerrar notificaci\xF3n",1,"notification-dismiss-btn",3,"click"]],template:function(t,i){if(t&1&&(o(0,"div",1),y(1,At,2,2,"div",2),o(2,"div",3),y(3,Dt,3,2,"div",4),o(4,"div",5),y(5,Bt,2,1,"ng-container",6)(6,Xt,1,1,"ng-template",null,0,ot),c(),o(8,"div",7),y(9,Lt,2,2,"button",8)(10,Vt,3,0,"button",9),c()()()),t&2){let r=et(7);v("data-type",i.data.type),a(),l("ngIf",i.data.showProgress&&i.data.duration>0),a(2),l("ngIf",i.data.icon),a(2),l("ngIf",i.isString(i.data.message))("ngIfElse",r),a(4),l("ngIf",i.data.action),a(),l("ngIf",i.data.dismissible)}},dependencies:[mt,ct,lt,vt,yt,ht,xt,Ct,It,kt,Tt],styles:["[_ngcontent-%COMP%]:root{--notification-accent: #3b82f6;--notification-bg: #ffffff;--notification-text: #111827;--notification-text-secondary: #6b7280}.notification-toast[_ngcontent-%COMP%]{position:relative;min-width:300px;max-width:500px;border-radius:.5rem;overflow:hidden;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;background-color:var(--notification-bg);color:var(--notification-text);border-left:4px solid var(--notification-accent)}.notification-toast[data-type=success][_ngcontent-%COMP%]{--notification-accent: #10b981;--notification-bg: #ffffff;--notification-text: #111827;--notification-text-secondary: #6b7280}@media (prefers-color-scheme: dark){.notification-toast[data-type=success][_ngcontent-%COMP%]{--notification-bg: #1f2937;--notification-text: #f9fafb;--notification-text-secondary: #d1d5db}}.notification-toast[data-type=error][_ngcontent-%COMP%]{--notification-accent: #ef4444;--notification-bg: #ffffff;--notification-text: #111827;--notification-text-secondary: #6b7280}@media (prefers-color-scheme: dark){.notification-toast[data-type=error][_ngcontent-%COMP%]{--notification-bg: #1f2937;--notification-text: #f9fafb;--notification-text-secondary: #d1d5db}}.notification-toast[data-type=warning][_ngcontent-%COMP%]{--notification-accent: #f59e0b;--notification-bg: #ffffff;--notification-text: #111827;--notification-text-secondary: #6b7280}@media (prefers-color-scheme: dark){.notification-toast[data-type=warning][_ngcontent-%COMP%]{--notification-bg: #1f2937;--notification-text: #f9fafb;--notification-text-secondary: #d1d5db}}.notification-toast[data-type=info][_ngcontent-%COMP%]{--notification-accent: #3b82f6;--notification-bg: #ffffff;--notification-text: #111827;--notification-text-secondary: #6b7280}@media (prefers-color-scheme: dark){.notification-toast[data-type=info][_ngcontent-%COMP%]{--notification-bg: #1f2937;--notification-text: #f9fafb;--notification-text-secondary: #d1d5db}}.notification-progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:3px;z-index:1}.notification-progress[_ngcontent-%COMP%]     mat-progress-bar{height:3px}.notification-progress[_ngcontent-%COMP%]     mat-progress-bar .mat-mdc-progress-bar-buffer{background-color:transparent}.notification-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;padding:1rem;min-height:48px}.notification-icon[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:center;width:24px;height:24px}.notification-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:var(--notification-accent)}.notification-message[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;min-height:24px;font-size:.875rem;line-height:1.625;color:var(--notification-text)}.notification-message[_ngcontent-%COMP%]     a{color:var(--notification-accent);text-decoration:underline}.notification-message[_ngcontent-%COMP%]     a[data-type=success] .notification-message   a:hover{color:#14e8a2}.notification-message[_ngcontent-%COMP%]     a[data-type=error] .notification-message   a:hover{color:#f37373}.notification-message[_ngcontent-%COMP%]     a[data-type=warning] .notification-message   a:hover{color:#f7b13c}.notification-message[_ngcontent-%COMP%]     a[data-type=info] .notification-message   a:hover{color:#6ca1f8}.notification-message[_ngcontent-%COMP%]     strong, .notification-message[_ngcontent-%COMP%]     b{font-weight:600}.notification-message[_ngcontent-%COMP%]     em, .notification-message[_ngcontent-%COMP%]     i{font-style:italic}.notification-actions[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;gap:.25rem;margin-left:auto}.notification-action-btn[_ngcontent-%COMP%]{border:none;background:none;padding:0;margin:0;cursor:pointer;font-family:inherit;font-size:inherit;outline:none;padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px;color:var(--notification-accent);background-color:transparent;border:1px solid var(--notification-accent);transition:all .15s ease-in-out}.notification-action-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.notification-action-btn[_ngcontent-%COMP%]:hover{background-color:var(--notification-accent);color:var(--notification-bg)}.notification-action-btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--notification-accent);outline-offset:2px}.notification-dismiss-btn[_ngcontent-%COMP%]{border:none;background:none;padding:0;margin:0;cursor:pointer;font-family:inherit;font-size:inherit;outline:none;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--notification-text-secondary);background-color:transparent;transition:all .15s ease-in-out}.notification-dismiss-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.notification-dismiss-btn[data-type=success][_ngcontent-%COMP%]   .notification-dismiss-btn[_ngcontent-%COMP%]:hover{background-color:#10b9811a;color:var(--notification-text)}.notification-dismiss-btn[data-type=error][_ngcontent-%COMP%]   .notification-dismiss-btn[_ngcontent-%COMP%]:hover{background-color:#ef44441a;color:var(--notification-text)}.notification-dismiss-btn[data-type=warning][_ngcontent-%COMP%]   .notification-dismiss-btn[_ngcontent-%COMP%]:hover{background-color:#f59e0b1a;color:var(--notification-text)}.notification-dismiss-btn[data-type=info][_ngcontent-%COMP%]   .notification-dismiss-btn[_ngcontent-%COMP%]:hover{background-color:#3b82f61a;color:var(--notification-text)}.notification-dismiss-btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--notification-accent);outline-offset:2px}.notification-dismiss-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}[_nghost-%COMP%]{display:block;animation:_ngcontent-%COMP%_slideInUp .3s cubic-bezier(.4,0,.2,1)}.mat-mdc-snack-bar-container-exit[_nghost-%COMP%]{animation:_ngcontent-%COMP%_slideOutDown .2s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_slideInUp{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_slideOutDown{0%{transform:translateY(0);opacity:1}to{transform:translateY(100%);opacity:0}}@media (max-width: 640px){.notification-toast[_ngcontent-%COMP%]{min-width:280px;max-width:calc(100vw - 32px)}.notification-content[_ngcontent-%COMP%]{padding:.75rem;gap:.5rem}.notification-message[_ngcontent-%COMP%]{font-size:.75rem}}@media (prefers-color-scheme: dark){.notification-toast[_ngcontent-%COMP%]{box-shadow:0 10px 15px -3px #0000004d,0 4px 6px -2px #0003}}@media (prefers-reduced-motion: reduce){[_nghost-%COMP%], .mat-mdc-snack-bar-container-exit[_nghost-%COMP%]{animation:none}.notification-action-btn[_ngcontent-%COMP%], .notification-dismiss-btn[_ngcontent-%COMP%]{transition:none}}"],changeDetection:0})};var k=class n{snackBar=s(Pt);defaultConfig={success:{icon:"check_circle",duration:4e3,panelClass:["notification-success"]},error:{icon:"error",duration:6e3,panelClass:["notification-error"]},warning:{icon:"warning",duration:5e3,panelClass:["notification-warning"]},info:{icon:"info",duration:4e3,panelClass:["notification-info"]}};globalDefaults={type:"info",duration:4e3,panelClass:[],horizontalPosition:"center",verticalPosition:"bottom",dismissible:!0,icon:"",showProgress:!0};show(e,t={}){let i=this.buildConfig(t),r=this.buildNotificationData(e,i);return this.snackBar.openFromComponent(w,{data:r,duration:i.duration,horizontalPosition:i.horizontalPosition,verticalPosition:i.verticalPosition,panelClass:["notification-container",...this.defaultConfig[i.type].panelClass,...Array.isArray(i.panelClass)?i.panelClass:[i.panelClass]].filter(Boolean)})}success(e,t={}){return this.show(e,p(f({},t),{type:"success"}))}error(e,t={}){return this.show(e,p(f({},t),{type:"error"}))}warning(e,t={}){return this.show(e,p(f({},t),{type:"warning"}))}info(e,t={}){return this.show(e,p(f({},t),{type:"info"}))}dismissAll(){this.snackBar.dismiss()}buildConfig(e){let t=e.type||this.globalDefaults.type,i=this.defaultConfig[t];return p(f(f({},this.globalDefaults),e),{type:t,duration:e.duration??i.duration,icon:e.icon||i.icon,panelClass:e.panelClass||i.panelClass})}buildNotificationData(e,t){return{message:e,type:t.type,action:t.action,dismissible:t.dismissible,icon:t.icon,showProgress:t.showProgress,duration:t.duration}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var C={GET:"store/cart/",ADD_ITEM:"store/cart/items/",UPDATE_ITEM:"store/cart/items/{item_id}/",DELETE_ITEM:"store/cart/items/{item_id}/",CHECKOUT:"store/cart/checkout/"};var St=class n{constructor(e,t,i,r){this.apiService=e;this.logger=t;this.storageService=i;this.notificationService=r}apiTimeout=T.apiTimeout;retryAttempts=T.retryAttempts;retryDelay=T.retryDelay;isLoggedIn(){return!!this.storageService.getToken()}getCart(){return this.isLoggedIn()?this.apiService.get(C.GET).pipe(u(this.apiTimeout),_({count:this.retryAttempts,delay:this.retryDelay}),h(e=>{this.logger.debug("Carrito obtenido",{id:e.id,items_cnt:e.items_cnt,items:e.items.map(t=>({id:t.id,availability_id:t.availability_id,product_metadata_id:t.product_metadata_id,qty:t.qty,unit_price:t.unit_price,currency:t.currency}))})}),b(this.handleError("getCart"))):(this.logger.debug("Usuario no autenticado, retornando null"),g(null))}addCartItem(e){if(!this.isLoggedIn())return this.logger.debug("Usuario no autenticado, retornando null"),g(null);let t=new dt({"Idempotency-Key":this.apiService.generateUUIDv4()});return this.apiService.post(C.ADD_ITEM,e,{headers:t}).pipe(u(this.apiTimeout),_({count:this.retryAttempts,delay:this.retryDelay}),h(i=>this.logger.debug("\xCDtem agregado al carrito",{cartId:i.id,itemId:i.items[i.items.length-1]?.id})),b(this.handleError("addCartItem")))}updateCartItemQty(e,t){return this.isLoggedIn()?this.apiService.patch(C.UPDATE_ITEM.replace("{item_id}",e.toString()),t).pipe(u(this.apiTimeout),_({count:this.retryAttempts,delay:this.retryDelay}),h(i=>this.logger.debug("Cantidad de \xEDtem actualizada",{itemId:e,cartId:i.id})),b(this.handleError("updateCartItemQty"))):(this.logger.debug("Usuario no autenticado, retornando null"),g(null))}deleteCartItem(e){return this.isLoggedIn()?this.apiService.delete(C.DELETE_ITEM.replace("{item_id}",e.toString())).pipe(u(this.apiTimeout),_({count:this.retryAttempts,delay:this.retryDelay}),h(t=>this.logger.debug("\xCDtem eliminado del carrito",{itemId:e,cartId:t.id})),b(this.handleError("deleteCartItem"))):(this.logger.debug("Usuario no autenticado, retornando null"),g(null))}checkoutCart(){return this.isLoggedIn()?this.apiService.post(C.CHECKOUT,{}).pipe(u(this.apiTimeout),_({count:this.retryAttempts,delay:this.retryDelay}),h(e=>this.logger.debug("Checkout de carrito realizado",{orderId:e.order_id})),b(this.handleError("checkoutCart"))):(this.logger.debug("Usuario no autenticado, retornando null"),g(null))}handleError(e){return t=>{this.logger.error(`${e} fall\xF3`,t);let i="Error desconocido al procesar la solicitud.";if(t instanceof ft)switch(t.status){case 401:this.storageService.clearStorage(),this.logger.debug("Sesi\xF3n limpiada debido a error 401"),i="Sesi\xF3n expirada. Por favor, inicia sesi\xF3n nuevamente.",this.notificationService.error(i,{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});break;case 409:i="No se pudo agregar el \xEDtem: stock insuficiente o carrito cerrado.",this.notificationService.error(i,{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});break;case 422:i="Conflicto de moneda. Por favor, verifica los productos en el carrito.",this.notificationService.error(i,{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});break;default:i=`Error en ${e}: ${t.message||"Error desconocido"}`,this.notificationService.error(i,{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}return X(()=>new Error(i))}}static \u0275fac=function(t){return new(t||n)(x(gt),x(pt),x(ut),x(k))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};export{k as a,St as b};
