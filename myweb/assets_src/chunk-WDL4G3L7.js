import{b as c}from"./chunk-AT2QGDAO.js";import{b as m,c as i,m as d}from"./chunk-RGOLDJ7I.js";import{$ as S,E as s,da as u,p}from"./chunk-JIXPPSV7.js";var a={PAY_SUCCESS:"/pay/success",PAY_CANCEL:"/pay/cancel",PAY_ORDER:t=>`/orders/${t}/pay`,CANCEL_ORDER:t=>`/orders/${t}/cancel`,LIST_ORDERS:"/orders/",GET_PAYMENT_STATUS:t=>`/orders/${t}/payment-status`,REFUND_ORDER:t=>`/orders/${t}/refund`,GET_ORDER_SALE:t=>`/orders/${t}/sales`,GET_SALES_SUMMARY:"/sales/summary"};var O=class t{constructor(e,r){this.apiService=e;this.logger=r}paySuccess(e,r,n){let o=new i().set("session_id",e).set("order_id",r.toString()).set("payment_method",n);return this.apiService.get(a.PAY_SUCCESS,{params:o}).pipe(s(this.handleError("paySuccess")))}payCancel(e,r){let n=new i().set("session_id",e).set("order_id",r.toString());return this.apiService.get(a.PAY_CANCEL,{params:n}).pipe(s(this.handleError("payCancel")))}payOrder(e,r,n){let o=new m({"Idempotency-Key":n});return this.apiService.post(a.PAY_ORDER(e),r,{headers:o}).pipe(s(this.handleError("payOrder")))}cancelOrder(e,r){return this.apiService.post(a.CANCEL_ORDER(e),r||{}).pipe(s(this.handleError("cancelOrder")))}listOrders(e){let r=new i;return e&&(e.state&&(r=r.set("state",e.state)),e.start_date&&(r=r.set("start_date",e.start_date)),e.end_date&&(r=r.set("end_date",e.end_date)),e.limit&&(r=r.set("limit",e.limit.toString()))),this.apiService.get(a.LIST_ORDERS,{params:r}).pipe(s(this.handleError("listOrders")))}getPaymentStatus(e){return this.apiService.get(a.GET_PAYMENT_STATUS(e)).pipe(s(this.handleError("getPaymentStatus")))}refundOrder(e,r){return this.apiService.post(a.REFUND_ORDER(e),r).pipe(s(this.handleError("refundOrder")))}getOrderSale(e){return this.apiService.get(a.GET_ORDER_SALE(e)).pipe(s(this.handleError("getOrderSale")))}getSalesSummary(){return this.apiService.get(a.GET_SALES_SUMMARY).pipe(s(this.handleError("getSalesSummary")))}handleError(e){return r=>(this.logger.error(`${e} fall\xF3`,r),p(()=>new Error(`Error en ${e}: ${r.message||"Error desconocido"}`)))}static \u0275fac=function(r){return new(r||t)(u(c),u(d))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})};export{O as a};
